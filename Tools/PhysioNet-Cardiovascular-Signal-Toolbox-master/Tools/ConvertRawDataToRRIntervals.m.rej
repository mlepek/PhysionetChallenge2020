diff a/Tools/PhysioNet-Cardiovascular-Signal-Toolbox-master/Tools/ConvertRawDataToRRIntervals.m b/Tools/PhysioNet-Cardiovascular-Signal-Toolbox-master/Tools/ConvertRawDataToRRIntervals.m	(rejected hunks)
@@ -52,15 +52,35 @@
     ECG_RawData = ECG_RawData';
 end
 
+
+% ECG12filt = ECG12filt_cleaned';
+
+% ECG12filt(ECG12filt>2*10^6)=0;
 % QRS Detection - Tosi skrypt
-jqrs_ann = hierarchiczny_12(ECG12filt,HRVparams.Fs);
-jqrs_ann = jqrs_ann';
+% jqrs_ann = hierarchiczny_12(ECG12filt,HRVparams.Fs,ECG_RawData,HRVparams);
+% jqrs_ann_T = jqrs_ann';
+% jqrs_ann = jqrs_ann';
 % ECG_RawData = ECG_RawData(:,1); % If more the one leads use only the first
 
+% ECG_RawData = ECG_RawData - movmedian(ECG_RawData,HRVparams.Fs/6);
 % QRS Dection 1 - jqrs
-% jqrs_ann = run_qrsdet_by_seg(ECG_RawData,HRVparams);
+% ECG_RawData(ECG_RawData>2*10^6)=0;
+
+%troche niewydajne - wykorzystuje znow liczenie Kors ale ze zmieniona
+%macierza ECG12filt z ucietymi T
 
 
+jqrs_ann = run_qrsdet_by_seg(ECG_RawData,HRVparams);
+
+% clf
+% figure(23)
+% hold on;
+% plot(ECG12filt(:,1));
+% plot(ECG_RawData);
+% % plot(jqrs_ann_T,ECG12filt(jqrs_ann_T,1),'r.','MarkerSize',20);
+% plot(jqrs_ann,ECG_RawData(jqrs_ann),'g.','MarkerSize',20);
+% hold off;
+
 %nieuzywane na razie - komentuje
 % QRS Detection 2 - sqrs (need single channel of ECG in digital values)
 % sqrs_ann = run_sqrs(ECG_RawData/GainQrsDetect,HRVparams,0);
